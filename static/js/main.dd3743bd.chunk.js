(window.webpackJsonpclient=window.webpackJsonpclient||[]).push([[0],{172:function(e,t,a){e.exports=a.p+"static/media/cloud-computing.d0a767f2.svg"},176:function(e,t,a){e.exports=a.p+"static/media/logo.c1f4f2ad.svg"},186:function(e,t,a){e.exports=a(375)},191:function(e,t,a){},375:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(14),i=a.n(o),l=(a(191),a(21)),s=a(15),c=a(22),u=a(23),p=a(24),m=(a(61),a(175)),d=a(60),h=a(117),g=a(120),f=a(118),b=a(119),y=a(170),v=a.n(y),E=a(84),k={submit:"http://18.218.210.185:1330/submit",view:"http://18.218.210.185:1330/view",count:"http://18.218.210.185:1330/count",type:"real"},C=a(86),S=a.n(C),w={getCount:function(e,t){return S.a.post(k.count,{latlng1:e,latlng2:t},{headers:{"Content-Type":"application/json"}})},view:function(e,t,a,n){return S.a.post(k.view,{latlng1:e,latlng2:t,skip:a,pagelimit:n},{headers:{"Content-Type":"application/json"}})},submit:function(e,t,a){var n=new FormData;return n.append("text",e),n.append("lat",t[0]),n.append("lng",t[1]),n.append("timestamp",(new Date).toGMTString()),null===a?n.append("file",null):n.append("file",a),S.a.post(k.submit,n,{headers:{"Content-Type":"multipart/form-data"}})}},L=a(211),x="mock"===k.type?{getCount:function(e,t){return new Promise((function(e,t){e({data:{count:100}})}))},view:function(e,t,a,n){for(var r=[],o=["Hey, I'm at Rice! Please look at my story.","What's up guys?  Places.io is so cool!  Good job COMP 413 Blue Team.","Check out my story guys please be careful !!","Rice University is a comprehensive research university located on a 300-acre tree-lined campus in Houston, Texas. Rice produces the next generation of leaders and advances tomorrow\u2019s thinking."],i=["https://cdn.shopify.com/s/files/1/3004/1474/products/orange-tabby_1800x1800.png?v=1544042837","https://images.pexels.com/photos/1108099/pexels-photo-1108099.jpeg?cs=srgb&dl=adorable-animal-breed-1108099.jpg&fm=jpg","https://avatars1.githubusercontent.com/u/23466848?s=400&v=4","https://tribkswb.files.wordpress.com/2018/09/s098916860.jpg?quality=85&strip=all&w=1540",null,null,null],l=0;l<100;l++){var s=o[L.random(0,o.length-1)],c=i[L.random(0,i.length-1)];r.push({storyid:l,lat:L.random(e[0],t[0],!0),long:L.random(e[1],t[1],!0),image_url:c,text:s,timestamp:(new Date).toGMTString()})}return new Promise((function(e,t){e({data:{entries:r.slice(a,Math.min(r.length,a+n))}})}))},submit:function(e,t,a){return new Promise((function(e,t){e({status:"Mock submit success"})}))}}:w,j={getCount:function(e,t){return x.getCount(e,t)},view:function(e,t,a,n){return x.view(e,t,a,n)},submit:function(e,t,a){return x.submit(e,t,a)}},N=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).map=void 0,a.state={currentZoom:10},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.map.leafletElement.on("zoomend",(function(){e.setState({currentZoom:e.map.leafletElement.getZoom()})}))}},{key:"handleClick",value:function(e){this.props.updateLatLngFunc({lat:e.latlng.wrap().lat,lng:e.latlng.wrap().lng})}},{key:"handleViewClick",value:function(){var e=this,t=this.map.leafletElement.getBounds().getSouthWest().wrap(),a=this.map.leafletElement.getBounds().getNorthEast().wrap(),n=[a.lat,t.lng].map((function(e){return Number(e)})),r=[t.lat,a.lng].map((function(e){return Number(e)}));j.view(n,r,0,10).then((function(t){e.props.updateCurrentDataPoints(t.data.entries),e.props.updateBoundingBox(n,r)})).catch((function(e){return console.log(e)}))}},{key:"mapCenter",value:function(){return[29.749907,-95.358421]}},{key:"render",value:function(){var e=this;return r.a.createElement(h.a,{ref:function(t){e.map=t},onClick:this.handleClick.bind(this),center:this.mapCenter(),zoom:10,style:{height:"90vh",width:"100%"}},r.a.createElement(g.a,{attribution:'&copy <a href="https://github.com/rice-comp413-blue/places.io">BlueTeam</a> | places.io',url:"https://{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png"}),this.props.markers.filter((function(t){return t.storyid!==e.props.selectedStory})).map((function(t){return r.a.createElement(f.a,{key:t.storyid,position:[t.lat,t.long],onClick:function(){return e.props.onStoryClick(t.storyid)}},r.a.createElement(b.a,null,r.a.createElement("h5",null,"Description"),r.a.createElement("br",null)," ",t.text,t.image_url?r.a.createElement("img",{alt:"Story",src:t.image_url,style:{height:"100px"}}):r.a.createElement("p",{className:"missing"},"No image attached."),r.a.createElement("p",null,"Story Id: ",t.storyid)))})),this.props.markers.filter((function(t){return t.storyid===e.props.selectedStory})).map((function(e){return r.a.createElement(O,{key:e.storyid,position:[e.lat,e.long]},r.a.createElement(b.a,null,r.a.createElement("div",null,e.text," "),r.a.createElement("br",null),e.image_url?r.a.createElement("img",{alt:"Story",src:e.image_url,style:{height:"100px"}}):r.a.createElement("p",{className:"missing"},"No image attached."),r.a.createElement("p",null,"Story Id: ",e.storyid)))})),"view"===this.props.mode&&this.state.currentZoom>6?r.a.createElement(v.a,{position:"topright"},r.a.createElement(E.a,{onClick:this.handleViewClick.bind(this)},"Query")):null)}}]),t}(r.a.Component),O=function(e){return r.a.createElement(f.a,Object.assign({ref:function(e){e&&e.leafletElement.openPopup()}},e))},P=N,D=a(4),F=a(405),B=a(407),R=a(408),I=a(409),T=a(410),M=a(411),z=a(89),W=Object(F.a)((function(){return{card:{maxWidth:1e3,borderStyle:"solid",borderWidth:"0.5px",boxShadow:"3px 3px 5px grey",borderColor:"grey",marginBottom:"1em",cursor:"pointer"},media:{height:0,paddingTop:"56.25%"},headerTitle:{fontSize:"0.65em"},subHeader:{fontSize:"0.85em"},text:{color:"black"},id:{fontSize:"0.6em",right:0,fontStyle:"italic",marginLeft:"auto",marginRight:0,color:"grey"}}}));function _(e){var t=W();return r.a.createElement(B.a,{className:t.card,style:e.selected?{borderWidth:"5px"}:void 0,onClick:function(){return e.onStoryClick(e.story.storyid)}},r.a.createElement(R.a,{title:r.a.createElement("div",{className:t.headerTitle},"Location: (".concat(e.story.lat.toFixed(4),", ").concat(e.story.long.toFixed(4),")")),subheader:r.a.createElement("div",{className:t.subHeader},new Date(e.story.timestamp).toLocaleString("en-US"))}),e.story.image_url?r.a.createElement(I.a,{className:t.media,image:e.story.image_url,title:"Story Image"}):null,r.a.createElement(T.a,null,r.a.createElement(z.a,{variant:"body2",color:"textSecondary",component:"div"},r.a.createElement("div",{className:t.text},e.story.text))),r.a.createElement(M.a,null,r.a.createElement("div",{className:t.id},"Story ID: ".concat(e.story.storyid))))}var U=function(e){return r.a.createElement("p",{className:"missing"},"Empty feed \u2014 make a view request!")},A=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).myRef=r.a.createRef(),a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(){this.myRef.current&&this.myRef.current.scrollIntoView({behavior:"smooth",block:"start"})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:this.props.className},this.props.elements.length>0?this.props.elements.map((function(t){return r.a.createElement("div",{key:t.storyid,ref:t.storyid===e.props.selectedStory?e.myRef:r.a.createRef()},r.a.createElement(_,{story:t,onStoryClick:e.props.onStoryClick,selected:t.storyid===e.props.selectedStory}))})):r.a.createElement(U,null))}}]),t}(r.a.Component),H=a(87),V=a(88),G=a(172),Z=a.n(G),q=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={description:"",file:null,showToast:!1},a.fileUpload=null,a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"handleFileSelection",value:function(e){this.setState({file:e.target.files[0]})}},{key:"handleSubmit",value:function(e){j.submit(this.state.description,this.props.curLatLng,this.state.file).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)})),this.setState({description:"",file:null,showToast:!0}),this.props.updateLatLngFunc({lat:0,lng:0}),this.fileUpload.value=""}},{key:"updateDescription",value:function(e){this.setState({description:e.target.value})}},{key:"buttonEnabled",value:function(){var e=null!==this.props.curLatLng[0]&&null!=this.props.curLatLng[1],t=""!==this.state.description,a=null!==this.state.file;return e&&(t||a)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",null,"Selected point: (",this.props.curLatLng[0].toFixed(4)," ",this.props.curLatLng[1].toFixed(4),")"),r.a.createElement(V.a,{style:{position:"absolute",top:"20em",left:"3em",zIndex:999},onClose:function(){return e.setState({showToast:!1})},show:this.state.showToast,delay:4e3,autohide:!0},r.a.createElement(V.a.Header,null,r.a.createElement("img",{src:"holder.js/20x20?text=%20",className:"rounded mr-2",alt:""}),r.a.createElement("strong",{className:"mr-auto"},r.a.createElement("img",{style:{height:"2em",width:"2em"},src:Z.a,alt:"logo"})," Thank you for your submission. "),r.a.createElement("small",null,"0s ago")),r.a.createElement(V.a.Body,null,"We've added your post to our database of places :)")),r.a.createElement(H.a,null,r.a.createElement(H.a.Group,null,r.a.createElement(H.a.Control,{value:this.state.description,onChange:this.updateDescription.bind(this),type:"text",placeholder:"Enter a description"})),r.a.createElement("div",null,r.a.createElement("input",{type:"file",accept:"image/*",id:"fileinput",onChange:this.handleFileSelection.bind(this),ref:function(t){return e.fileUpload=t}})),r.a.createElement("br",null),r.a.createElement(E.a,{disabled:!this.buttonEnabled(),variant:"primary",onClick:this.handleSubmit.bind(this),title:"Select a point on the map first."},"Submit")))}}]),t}(r.a.Component),J=a(173),K=a(174),Q=a.n(K),$=10,X=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handlePageClick=function(e){j.view(a.props.upperLeft,a.props.bottomRight,e.selected*$,$).then((function(e){a.props.updateCurrentDataPoints(e.data.entries)})).catch((function(e){return console.log(e)})),a.setState({pageNum:e.selected})},a.updateMode=function(e){return a.props.updateModeFunc(e)},a.render=function(){return r.a.createElement("div",{className:"sidebar"},r.a.createElement(J.SegmentedControl,{name:"modeToggle",options:[{label:"View",value:"view",default:!0},{label:"Submit",value:"submit"}],setValue:function(e){return a.updateMode(e)},style:{width:"100%",height:"3em",fontSize:"0.9em",textAlign:"center",color:"#2980b9"}}),"view"===a.props.mode?r.a.createElement(A,{className:"feed",elements:a.props.feed,onStoryClick:a.props.onStoryClick,selectedStory:a.props.selectedStory}):r.a.createElement(q,{updateLatLngFunc:a.props.updateLatLngFunc.bind(Object(D.a)(a)),curLatLng:a.props.curLatLng}),"view"===a.props.mode&&a.state.pageCount&&a.props.feed.length>0?r.a.createElement("div",{className:"paginate-container"},r.a.createElement(Q.a,{forcePage:a.state.pageNum,previousLabel:"previous",nextLabel:"next",breakLabel:"...",pageCount:a.state.pageCount,marginPagesDisplayed:1,pageRangeDisplayed:1,onPageChange:a.handlePageClick.bind(Object(D.a)(a)),containerClassName:"pagination",subContainerClassName:"pages pagination",activeClassName:"active",breakClassName:"page-item",breakLinkClassName:"page-link",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link"})):null)},a.state={pageCount:null,pageNum:0},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this,a=e.upperLeft,n=this.props.upperLeft,r=e.bottomRight,o=this.props.bottomRight;(a.length!==n.length||r.length!==o.length||a[0]!==n[0]||a[1]!==n[1]||r[0]!==o[0]||r[1]!==o[1])&&(j.getCount(n,o).then((function(e){t.setState({pageCount:Math.ceil(e.data.count/$)})})).catch((function(e){return console.log(e)})),this.setState({pageNum:0}))}}]),t}(r.a.Component),Y=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={mode:"view",curLatLng:{lat:0,lng:0},currentData:[],boundingBox:{upperLeft:[],bottomRight:[]},selectedStoryId:null},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"updateModeFunc",value:function(e){this.setState({mode:e})}},{key:"updateLatLngFunc",value:function(e){this.setState({curLatLng:e})}},{key:"updateCurrentDataPoints",value:function(e){this.setState({currentData:e})}},{key:"updateBoundingBox",value:function(e,t){this.setState({boundingBox:{upperLeft:e,bottomRight:t}})}},{key:"onStoryClick",value:function(e){this.setState({selectedStoryId:e})}},{key:"render",value:function(){var e=[this.state.curLatLng.lat,this.state.curLatLng.lng];return r.a.createElement(m.a,null,r.a.createElement(d.a,{md:3},r.a.createElement(X,{curLatLng:e,mode:this.state.mode,updateLatLngFunc:this.updateLatLngFunc.bind(this),updateModeFunc:this.updateModeFunc.bind(this),updateCurrentDataPoints:this.updateCurrentDataPoints.bind(this),feed:this.state.currentData,upperLeft:this.state.boundingBox.upperLeft,bottomRight:this.state.boundingBox.bottomRight,onStoryClick:this.onStoryClick.bind(this),selectedStory:this.state.selectedStoryId})),r.a.createElement(d.a,{md:9},r.a.createElement(P,{mode:this.state.mode,updateLatLngFunc:this.updateLatLngFunc.bind(this),updateCurrentDataPoints:this.updateCurrentDataPoints.bind(this),updateBoundingBox:this.updateBoundingBox.bind(this),markers:this.state.currentData,onStoryClick:this.onStoryClick.bind(this),selectedStory:this.state.selectedStoryId})))}}]),t}(r.a.Component),ee=a(114),te=a(176),ae=a.n(te),ne=a(179),re=a(412),oe=a(416),ie=a(177),le=a.n(ie),se=a(413),ce=a(417),ue=a(377),pe=a(414),me=a(415),de=function(e){var t=r.a.useState(!1),a=Object(ne.a)(t,2),n=a[0],o=a[1],i=r.a.useRef(null),l=function(t){i.current&&i.current.contains(t.target)||(e.updatePageIdFunc(Number(t.target.id)),o(!1))};function s(e){"Tab"===e.key&&(e.preventDefault(),o(!1))}var c=r.a.useRef(n);r.a.useEffect((function(){!0===c.current&&!1===n&&i.current.focus(),c.current=n}),[n]);return r.a.createElement("div",null,r.a.createElement(re.a,{ref:i,"aria-controls":n?"menu-list-grow":void 0,"aria-haspopup":"true",onClick:function(){o((function(e){return!e}))}},r.a.createElement(le.a,null)),r.a.createElement(pe.a,{style:{zIndex:2147483638,marginRight:"2em"},open:n,anchorEl:i.current,role:void 0,transition:!0,disablePortal:!0},(function(e){var t=e.TransitionProps,a=e.placement;return r.a.createElement(ce.a,Object.assign({},t,{style:{transformOrigin:"bottom"===a?"center top":"center bottom"}}),r.a.createElement(ue.a,{style:{backgroundColor:"white"}},r.a.createElement(se.a,{onClickAway:l},r.a.createElement(me.a,{autoFocusItem:n,id:"menu-list-grow",onKeyDown:s},r.a.createElement(oe.a,{id:0,onClick:l},"Main App"),r.a.createElement(oe.a,{id:1,onClick:l},"About")))))})))},he=function(e){return r.a.createElement("div",null,r.a.createElement(ee.a,{bg:"light"},r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("img",{style:{height:"100%",width:"2em",marginRight:"0.5em"},alt:"logo",src:ae.a}),r.a.createElement(ee.a.Brand,null,"places.io")),r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement(de,e))))},ge=function(e){return r.a.createElement("div",null,"Places.io.  COMP 413 Fall 2019 Blue Team.  Feel free to add more here!")},fe=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={pageId:0},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"updatePageId",value:function(e){this.setState({pageId:e})}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(he,{updatePageIdFunc:this.updatePageId.bind(this)}),0===this.state.pageId?r.a.createElement(Y,null):r.a.createElement(ge,null))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(fe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},61:function(e,t,a){}},[[186,1,2]]]);
//# sourceMappingURL=main.dd3743bd.chunk.js.map